# –ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∑–∞–ø–∏—Å–∏ —ç–∫—Ä–∞–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ

## üìã –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    MyApp (main.dart)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ      ScreenRecorderWrapper (–æ–±–µ—Ä—Ç–∫–∞)              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ScreenRecorder (–∏–∑ –ø–∞–∫–µ—Ç–∞)                 ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  RepaintBoundary (Flutter)           ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  MaterialApp                 ‚îÇ   ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ MainScreen               ‚îÇ   ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞–ø–∏—Å—å —ç–∫—Ä–∞–Ω–∞

### 1. **RepaintBoundary - –æ—Å–Ω–æ–≤–∞ –∑–∞—Ö–≤–∞—Ç–∞**

**–ß—Ç–æ —ç—Ç–æ:**
- `RepaintBoundary` - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç Flutter, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–∂–µ—Ç-–¥–µ—Ä–µ–≤–æ –≤ —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (`ui.Image`)

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```dart
// –í screen_recorder.dart
RepaintBoundary(
  key: controller._containerKey,  // GlobalKey –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ RenderObject
  child: Container(
    width: width,
    height: height,
    child: child,  // –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  ),
)
```

**–ü—Ä–æ—Ü–µ—Å—Å –∑–∞—Ö–≤–∞—Ç–∞:**
1. Flutter —Ä–µ–Ω–¥–µ—Ä–∏—Ç –≤—Å–µ –≤–∏–¥–∂–µ—Ç—ã –≤–Ω—É—Ç—Ä–∏ `RepaintBoundary` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π
2. –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `toImageSync()`, Flutter –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç —Å–ª–æ–π –≤ `ui.Image`
3. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ, —á—Ç–æ –±—ã–ª–æ –≤–Ω—É—Ç—Ä–∏ –≥—Ä–∞–Ω–∏—Ü—ã `RepaintBoundary`

**–í–∞–∂–Ω–æ:** –†–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–∞ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `ScreenRecorder` –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –º–µ–Ω—è—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏!

---

### 2. **–ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞—Ö–≤–∞—Ç–∞ –∫–∞–¥—Ä–æ–≤**

#### PostFrameCallback - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

```dart
// –í ScreenRecorderController
void start() {
  _record = true;
  _binding.addPostFrameCallback(postFrameCallback);  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º callback
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `PostFrameCallback` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞**, –∫–æ—Ç–æ—Ä—ã–π Flutter –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –º—ã –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –∫–∞–¥—Ä—ã **–ø–æ—Å–ª–µ** —Ç–æ–≥–æ, –∫–∞–∫ UI –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω
- Callback –ø–æ–ª—É—á–∞–µ—Ç `Duration timestamp` - —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–¥—Ä–∞

#### –ü—Ä–æ–ø—É—Å–∫ –∫–∞–¥—Ä–æ–≤ (Frame Skipping)

```dart
int skipped = 0;

void postFrameCallback(Duration timestamp) {
  if (skipped > 0) {
    skipped = skipped - 1;  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–∞–¥—Ä
    _binding.addPostFrameCallback(postFrameCallback);  // –ñ–¥–µ–º —Å–ª–µ–¥—É—é—â–∏–π
    return;  // –ù–ï –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º —ç—Ç–æ—Ç –∫–∞–¥—Ä
  }
  
  if (skipped == 0) {
    skipped = skipped + skipFramesBetweenCaptures;  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
  }
  
  // –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –∫–∞–¥—Ä
  final image = capture();
  _exporter.onNewFrame(Frame(timestamp, image));
  
  _binding.addPostFrameCallback(postFrameCallback);  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π
}
```

**–ü—Ä–∏–º–µ—Ä —Å `skipFramesBetweenCaptures = 60`:**
- Flutter —Ä–µ–Ω–¥–µ—Ä–∏—Ç 60 FPS
- –ú—ã –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π 61-–π –∫–∞–¥—Ä (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º 60)
- –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∑–∞—Ö–≤–∞—Ç–∞: ~1 FPS (1 –∫–∞–¥—Ä –≤ —Å–µ–∫—É–Ω–¥—É)
- –≠—Ç–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ** –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞!

**–§–æ—Ä–º—É–ª–∞:**
```
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π FPS = Flutter FPS / (skipFramesBetweenCaptures + 1)
–ü—Ä–∏–º–µ—Ä: 60 / (60 + 1) = ~0.98 FPS
```

---

### 3. **–ü—Ä–æ—Ü–µ—Å—Å –∑–∞—Ö–≤–∞—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**

```dart
ui.Image? capture() {
  // 1. –ù–∞—Ö–æ–¥–∏–º RenderObject —á–µ—Ä–µ–∑ GlobalKey
  final renderObject = _containerKey.currentContext!
      .findRenderObject() as RenderRepaintBoundary;
  
  // 2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∑–∞–¥–∞–Ω–Ω—ã–º pixelRatio
  return renderObject.toImageSync(pixelRatio: pixelRatio);
}
```

**pixelRatio - —á—Ç–æ —ç—Ç–æ:**
- `pixelRatio = 1.0` ‚Üí 1 –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–∏–∫—Å–µ–ª—å = 1 –ø–∏–∫—Å–µ–ª—å –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- `pixelRatio = 0.5` ‚Üí 1 –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–∏–∫—Å–µ–ª—å = 0.5 –ø–∏–∫—Å–µ–ª—è –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ 2 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ)
- `pixelRatio = 2.0` ‚Üí 1 –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–∏–∫—Å–µ–ª—å = 2 –ø–∏–∫—Å–µ–ª—è –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ)

**–í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
- `pixelRatio: 1` ‚Üí –ø–æ–ª–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
- –≠—Ç–æ –¥–∞–µ—Ç –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–æ –±–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞: `pixelRatio: 0.5` –∏–ª–∏ `0.3`
- –î–ª—è –∫–∞—á–µ—Å—Ç–≤–∞: `pixelRatio: 1.0`

---

### 4. **–•—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤**

```dart
class Frame {
  final Duration timeStamp;  // –í—Ä–µ–º—è –∫–∞–¥—Ä–∞
  final ui.Image image;       // –°–∞–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
}

class Exporter {
  final List<Frame> _frames = [];  // –í—Å–µ –∫–∞–¥—Ä—ã –≤ –ø–∞–º—è—Ç–∏
  
  void onNewFrame(Frame frame) {
    _frames.add(frame);  // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–¥—Ä –≤ —Å–ø–∏—Å–æ–∫
  }
}
```

**–í–∞–∂–Ω–æ:**
- –í—Å–µ –∫–∞–¥—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è **–≤ –ø–∞–º—è—Ç–∏** –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- –ö–∞–∂–¥—ã–π `ui.Image` –∑–∞–Ω–∏–º–∞–µ—Ç: `width √ó height √ó 4 –±–∞–π—Ç–∞` (RGBA)
- –ü—Ä–∏–º–µ—Ä: 1080√ó1920 = ~8 –ú–ë –Ω–∞ –∫–∞–¥—Ä!
- –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ 10 —Å–µ–∫—É–Ω–¥ —Å 1 FPS = 10 –∫–∞–¥—Ä–æ–≤ = ~80 –ú–ë –≤ –ø–∞–º—è—Ç–∏

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –î–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –Ω–µ—Ö–≤–∞—Ç–∫—É –ø–∞–º—è—Ç–∏
- –ù—É–∂–Ω–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

---

### 5. **–≠–∫—Å–ø–æ—Ä—Ç –≤ GIF**

#### –®–∞–≥ 1: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–∞–¥—Ä–æ–≤ –≤ PNG

```dart
Future<List<RawFrame>?> exportFrames() async {
  final bytesImages = <RawFrame>[];
  for (final frame in _frames) {
    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º ui.Image –≤ PNG –±–∞–π—Ç—ã
    final bytesImage = await frame.image.toByteData(
      format: ui.ImageByteFormat.png
    );
    
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
    if (frame.image.width >= _maxWidthFrame) {
      _maxWidthFrame = frame.image.width;
    }
    // ...
    
    bytesImages.add(RawFrame(16, bytesImage));  // 16ms = ~60 FPS
  }
  return bytesImages;
}
```

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ GIF (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∏–∑–æ–ª—è—Ç–µ)

```dart
Future<List<int>?> exportGif() async {
  final frames = await exportFrames();
  // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∏–∑–æ–ª—è—Ç–µ (compute) –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  return compute(_exportGif, DataHolder(frames, width, height));
}
```

**–ü–æ—á–µ–º—É –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–∑–æ–ª—è—Ç:**
- –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ GIF - —Ç—è–∂–µ–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
- `compute()` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- UI –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∑—ã–≤—á–∏–≤—ã–º –≤–æ –≤—Ä–µ–º—è —ç–∫—Å–ø–æ—Ä—Ç–∞

#### –®–∞–≥ 3: –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ GIF

```dart
static Future<List<int>?> _exportGif(DataHolder data) async {
  image.Image mainImage = image.Image.empty();
  
  for (final frame in frames) {
    // 1. –î–µ–∫–æ–¥–∏—Ä—É–µ–º PNG
    final decodedImage = image.decodePng(iAsBytes);
    
    // 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–¥—Ä–∞
    decodedImage.frameDuration = frame.durationInMillis;
    
    // 3. –†–∞—Å—à–∏—Ä—è–µ–º –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    final expanded = image.copyExpandCanvas(
      decodedImage,
      newWidth: width,
      newHeight: height,
    );
    
    // 4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
    final withTransparency = _encodeGifWIthTransparency(expanded);
    
    // 5. –î–æ–±–∞–≤–ª—è–µ–º –≤ GIF
    mainImage.frames.add(withTransparency);
  }
  
  // 6. –ö–æ–¥–∏—Ä—É–µ–º –≤—Å–µ –∫–∞–¥—Ä—ã –≤ –æ–¥–∏–Ω GIF —Ñ–∞–π–ª
  return image.encodeGif(mainImage);
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- GIF –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (alpha –∫–∞–Ω–∞–ª)
- –í—Å–µ –∫–∞–¥—Ä—ã –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞

---

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. **pixelRatio** (–≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ: `1`)

**–í–ª–∏—è–Ω–∏–µ:**
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** –ø—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω –∫–≤–∞–¥—Ä–∞—Ç—É pixelRatio
- **–ö–∞—á–µ—Å—Ç–≤–æ:** –≤—ã—à–µ pixelRatio = –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –≤—ã—à–µ pixelRatio = –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∑–∞—Ö–≤–∞—Ç

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–≠–∫—Ä–∞–Ω: 1080√ó1920
pixelRatio = 1.0  ‚Üí 1080√ó1920 = 2,073,600 –ø–∏–∫—Å–µ–ª–µ–π
pixelRatio = 0.5  ‚Üí 540√ó960   = 518,400 –ø–∏–∫—Å–µ–ª–µ–π (–≤ 4 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ!)
pixelRatio = 0.3  ‚Üí 324√ó576   = 186,624 –ø–∏–∫—Å–µ–ª–µ–π (–≤ 11 —Ä–∞–∑ –º–µ–Ω—å—à–µ!)
```

### 2. **skipFramesBetweenCaptures** (–≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ: `60`)

**–í–ª–∏—è–Ω–∏–µ:**
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω (–±–æ–ª—å—à–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ = –º–µ–Ω—å—à–µ –∫–∞–¥—Ä–æ–≤ = –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)
- **–ü–ª–∞–≤–Ω–æ—Å—Ç—å:** –º–µ–Ω—å—à–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ = –ø–ª–∞–≤–Ω–µ–µ –∞–Ω–∏–º–∞—Ü–∏—è
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –±–æ–ª—å—à–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ = –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
```
Flutter FPS: 60
skipFramesBetweenCaptures = 0   ‚Üí 60 FPS –∑–∞—Ö–≤–∞—Ç–∞ (–æ—á–µ–Ω—å –ø–ª–∞–≤–Ω–æ, –æ–≥—Ä–æ–º–Ω—ã–π —Ñ–∞–π–ª)
skipFramesBetweenCaptures = 2   ‚Üí 20 FPS –∑–∞—Ö–≤–∞—Ç–∞ (–ø–ª–∞–≤–Ω–æ, –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª)
skipFramesBetweenCaptures = 5   ‚Üí 10 FPS –∑–∞—Ö–≤–∞—Ç–∞ (–Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Å—Ä–µ–¥–Ω–∏–π —Ñ–∞–π–ª)
skipFramesBetweenCaptures = 30  ‚Üí 2 FPS –∑–∞—Ö–≤–∞—Ç–∞ (–ø—Ä–µ—Ä—ã–≤–∏—Å—Ç–æ, –º–∞–ª–µ–Ω—å–∫–∏–π —Ñ–∞–π–ª)
skipFramesBetweenCaptures = 60  ‚Üí 1 FPS –∑–∞—Ö–≤–∞—Ç–∞ (–æ—á–µ–Ω—å –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç–æ, –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–π —Ñ–∞–π–ª)
```

**–í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
- `skipFramesBetweenCaptures: 60` ‚Üí ~1 –∫–∞–¥—Ä –≤ —Å–µ–∫—É–Ω–¥—É
- –≠—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤ –∏–ª–∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π

---

## üìä –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
main.dart
  ‚îî‚îÄ MyApp
      ‚îî‚îÄ ChangeNotifierProvider<AppState>
          ‚îî‚îÄ ScreenRecorderWrapper
              ‚îú‚îÄ ScreenRecorderController (–∏–∑ –ø–∞–∫–µ—Ç–∞)
              ‚îú‚îÄ ScreenRecorder (–∏–∑ –ø–∞–∫–µ—Ç–∞)
              ‚îÇ   ‚îî‚îÄ RepaintBoundary
              ‚îÇ       ‚îî‚îÄ MaterialApp
              ‚îÇ           ‚îî‚îÄ MainScreen (3 —Ç–∞–±–∞)
              ‚îî‚îÄ ScreenRecorderWrapperInherited
                  ‚îî‚îÄ (–¥–æ—Å—Ç—É–ø –∫ startRecording/stopRecording)
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
   ```
   ScreenRecorderWrapper.initState()
   ‚Üí –°–æ–∑–¥–∞–µ—Ç ScreenRecorderController
   ‚Üí –ü–æ–ª—É—á–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–∞ —á–µ—Ä–µ–∑ PlatformDispatcher
   ‚Üí –§–∏–∫—Å–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –∑–∞–ø–∏—Å–∏
   ```

2. **–ù–∞—á–∞–ª–æ –∑–∞–ø–∏—Å–∏:**
   ```
   startRecording()
   ‚Üí _controller.exporter.clear()  // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∫–∞–¥—Ä—ã
   ‚Üí _controller.start()            // –ó–∞–ø—É—Å–∫–∞–µ—Ç PostFrameCallback
   ‚Üí PostFrameCallback –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∫–∞–¥—Ä—ã
   ```

3. **–ó–∞—Ö–≤–∞—Ç –∫–∞–¥—Ä–æ–≤:**
   ```
   PostFrameCallback (–∫–∞–∂–¥—ã–π –∫–∞–¥—Ä Flutter)
   ‚Üí –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∫–∞–¥—Ä—ã —Å–æ–≥–ª–∞—Å–Ω–æ skipFramesBetweenCaptures
   ‚Üí capture() ‚Üí toImageSync() ‚Üí ui.Image
   ‚Üí _exporter.onNewFrame(Frame(timestamp, image))
   ‚Üí –ö–∞–¥—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
   ```

4. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏:**
   ```
   stopRecording()
   ‚Üí _controller.stop()  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç PostFrameCallback
   ‚Üí _saveRecording()
     ‚Üí _controller.exporter.exportGif()  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∫–∞–¥—Ä—ã –≤ GIF
     ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫
     ‚Üí –í—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
     ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç onFileSaved callback
   ‚Üí AppState.updateFileInfo()  // –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   ‚Üí UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Provider
   ```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

**AppState (Provider):**
- –•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ
- –£–≤–µ–¥–æ–º–ª—è–µ—Ç –≤–∏–¥–∂–µ—Ç—ã –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ

**ScreenRecorderWrapperInherited:**
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ `startRecording()` –∏ `stopRecording()` –∏–∑ –¥–æ—á–µ—Ä–Ω–∏—Ö –≤–∏–¥–∂–µ—Ç–æ–≤
- –ü–µ—Ä–µ–¥–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (`isRecording`, `isExporting`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `ScreenRecorderControls`

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è

### 1. **–ó–∞–ø–∏—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤–∏–¥–∂–µ—Ç–æ–≤, –∞ –Ω–µ —Å–∏—Å—Ç–µ–º—ã**

- –≠—Ç–æ **–Ω–µ** —Å–∏—Å—Ç–µ–º–Ω–∞—è –∑–∞–ø–∏—Å—å —ç–∫—Ä–∞–Ω–∞ (–∫–∞–∫ –≤ iOS/Android)
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `RepaintBoundary`
- –ï—Å–ª–∏ –≤–∏–¥–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ `ScreenRecorder`, –æ–Ω **–Ω–µ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω**

### 2. **–†–∞–∑–º–µ—Ä—ã —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏**

- `width` –∏ `height` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ `ScreenRecorder` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–º–µ–Ω—è—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ ‚Üí –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3. **–í—Å–µ –∫–∞–¥—Ä—ã –≤ –ø–∞–º—è—Ç–∏**

- –í–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ –≤—Å–µ –∫–∞–¥—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ RAM
- –î–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é
- –ü–æ—Å–ª–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è

### 4. **–≠–∫—Å–ø–æ—Ä—Ç - —Ç—è–∂–µ–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è**

- –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ GIF –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∏–∑–æ–ª—è—Ç–µ
- –ú–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
- UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (`isExporting`)

### 5. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã**

- `pixelRatio` –∏ `skipFramesBetweenCaptures` –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ —Ä–∞–∑–º–µ—Ä–æ–º —Ñ–∞–π–ª–∞
- –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ä–∞ (skipFrames=60, pixelRatio=1)

---

## üìà –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞

### –§–æ—Ä–º—É–ª–∞ (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è):

```
–†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä–∞ (PNG) ‚âà width √ó height √ó 4 –±–∞–π—Ç–∞ √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–∂–∞—Ç–∏—è
–†–∞–∑–º–µ—Ä GIF ‚âà –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–∫–∞–¥—Ä–æ–≤ √ó —Å—Ä–µ–¥–Ω–∏–π_—Ä–∞–∑–º–µ—Ä_–∫–∞–¥—Ä–∞ √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç_GIF_—Å–∂–∞—Ç–∏—è
```

### –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:

**–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `pixelRatio: 1` ‚Üí –ø–æ–ª–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
- `skipFramesBetweenCaptures: 60` ‚Üí ~1 –∫–∞–¥—Ä/—Å–µ–∫
- –≠–∫—Ä–∞–Ω: –Ω–∞–ø—Ä–∏–º–µ—Ä, 1080√ó1920

**–†–∞—Å—á–µ—Ç:**
```
1 –∫–∞–¥—Ä PNG (–Ω–µ—Å–∂–∞—Ç—ã–π): 1080 √ó 1920 √ó 4 = 8,294,400 –±–∞–π—Ç ‚âà 8 –ú–ë
1 –∫–∞–¥—Ä PNG (—Å–∂–∞—Ç—ã–π): ~500 –ö–ë - 2 –ú–ë (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ)
10 —Å–µ–∫—É–Ω–¥ –∑–∞–ø–∏—Å–∏ = 10 –∫–∞–¥—Ä–æ–≤ = ~5-20 –ú–ë PNG
GIF —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π: ~2-10 –ú–ë (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ)
```

**–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**
- –ü—Ä–æ–µ–∫—Ç –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –¥–ª—è 1 –º–∏–Ω—É—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
  ```
  bytesPerSecond = actualFileSize / actualDurationInSeconds
  estimatedSizePerMinute = bytesPerSecond √ó 60
  ```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### RepaintBoundary.toImageSync()

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤–∏–¥–∂–µ—Ç-–¥–µ—Ä–µ–≤–æ –≤ `ui.Image`
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç UI –ø–æ—Ç–æ–∫ –≤–æ –≤—Ä–µ–º—è –∑–∞—Ö–≤–∞—Ç–∞ (–Ω–æ —ç—Ç–æ –±—ã—Å—Ç—Ä–æ)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ `RepaintBoundary`
- –ù–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (—Å—Ç–∞—Ç—É—Å-–±–∞—Ä, –Ω–∞–≤–∏–≥–∞—Ü–∏—è)
- –ù–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–∂–µ—Ç—ã –ø–æ–≤–µ—Ä—Ö (overlay), –µ—Å–ª–∏ –æ–Ω–∏ –≤–Ω–µ –≥—Ä–∞–Ω–∏—Ü—ã

### SchedulerBinding.addPostFrameCallback()

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç callback, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ UI –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω
- –ü–µ—Ä–µ–¥–∞–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–¥—Ä–∞ (`Duration timestamp`)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Callback –¥–æ–ª–∂–µ–Ω —Å–∞–º –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π callback
- –ï—Å–ª–∏ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å ‚Üí –∑–∞—Ö–≤–∞—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –∫–∞–¥—Ä—ã –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å

### compute() –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∏–∑–æ–ª—è—Ç–µ (–ø–æ—Ç–æ–∫–µ)
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI –ø–æ—Ç–æ–∫
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:**
- –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ GIF –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å —Å–µ–∫—É–Ω–¥—ã
- –ë–µ–∑ `compute()` UI –∑–∞–º–æ—Ä–æ–∑–∏—Ç—Å—è
- –° `compute()` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

---

## üéì –í—ã–≤–æ–¥—ã

1. **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∑–∞—Ö–≤–∞—Ç–µ –≤–∏–¥–∂–µ—Ç-–¥–µ—Ä–µ–≤–∞**, –∞ –Ω–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∑–∞–ø–∏—Å–∏ —ç–∫—Ä–∞–Ω–∞
2. **RepaintBoundary** - –∫–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–æ–≤ –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. **PostFrameCallback** —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∑–∞—Ö–≤–∞—Ç —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º Flutter
4. **–ü—Ä–æ–ø—É—Å–∫ –∫–∞–¥—Ä–æ–≤** –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
5. **–í—Å–µ –∫–∞–¥—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏** –¥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞
6. **–≠–∫—Å–ø–æ—Ä—Ç –≤ GIF** - —Ç—è–∂–µ–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
7. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã `pixelRatio` –∏ `skipFramesBetweenCaptures`** –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞:
- –£–º–µ–Ω—å—à–∏—Ç—å `pixelRatio` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 0.5 –∏–ª–∏ 0.3)
- –£–≤–µ–ª–∏—á–∏—Ç—å `skipFramesBetweenCaptures` (–µ—Å–ª–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è)

### –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞:
- –£–≤–µ–ª–∏—á–∏—Ç—å `pixelRatio` –¥–æ 1.0 –∏–ª–∏ –≤—ã—à–µ
- –£–º–µ–Ω—å—à–∏—Ç—å `skipFramesBetweenCaptures` (–Ω–æ —ç—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç —Ä–∞–∑–º–µ—Ä)

### –î–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π:
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞–¥—Ä–æ–≤ –Ω–∞ –¥–∏—Å–∫ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ (—Ç—Ä–µ–±—É–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–∞)
